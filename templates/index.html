
{% extends "base.html" %}
{% block content %}
<h3>Carteira de Compras de Dólar</h3>

<table class="table table-striped table-bordered">
  <thead>
    <tr>
      <th>Data Compra</th>
      <th>Quantidade (USD)</th>
      <th>Cotação (R$)</th>
      <th>Valor Total (R$)</th>
      <th>DataHora Cotação</th>
    </tr>
  </thead>
  <tbody>
    {% for c in compras %}
    <tr>
      <td>{{ c.data_compra }}</td>
      <td>{{ "%.4f"|format(c.quantidade_usd) }}</td>
      <td>{{ "%.6f"|format(c.cotacao_usd_brl) }}</td>
      <td>{{ "%.2f"|format(c.valor_total_brl) }}</td>
      <td>{{ c.datahora_cotacao or '-' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>

<div class="row mt-4">
  <div class="col-md-4">
    <div class="card p-3">
      <strong>Total USD</strong>
      <div>{{ "%.2f"|format(total_usd) }}</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3">
      <strong>Total R$</strong>
      <div>{{ "%.2f"|format(total_brl) }}</div>
    </div>
  </div>
  <div class="col-md-4">
    <div class="card p-3">
      <strong>Custo Médio Ponderado (R$ / USD)</strong>
      <div>{{ custo_medio if custo_medio else '-' }}</div>
    </div>
  </div>
</div>

<div class="mt-3">
  <small>Última data/hora de cotação (entre registros): {{ last_cotacao or '-' }}</small>
</div>

{% endblock %}
